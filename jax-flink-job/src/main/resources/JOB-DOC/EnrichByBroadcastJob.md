# 字段丰富(数据流广播)

通过key反查字典数据流，如果找到则把字典里其他字段拼到原始数据上；如果字典里没有找到则不添加字段。

接收2个流输入，一个是数据流（slot0），一个是字典流（slot1），需要等字典流先输入后，后续的数据流才可以反查。

适用场景：适用于字典表或维度表此类比较小的表且时效性要求不太高的场景，做定时全量查询；

上游可以通过JDBCSourceJob来定时获取全量字典表；

参数说明

- key： 通过查询key在广播的字典map中反查

## 字段丰富操作样例

参数如下：

```
{
  "key" : "host"
}
```

输入1 - 原始数据：

```
{
  "host" : "a",
  "time" : "2020-11-22 12:00:01",
  "value" : 2
}
{
  "host" : "b",
  "time" : "2020-11-22 12:00:00",
  "value" : 2
}
{
  "host" : "c",
  "time" : "2020-11-22 12:00:01",
  "value" : 3
}
```

输入2 - 字典数据：

```
{
  "ip" : "1.1.1.1",
  "host" : "a",
  "sys" : "metric"
}
{
  "ip" : "2.2.2.2",
  "host" : "b",
  "sys" : "eoi"
}
```

输出的数据如下：

```
{"ip":"1.1.1.1","host":"a","time":"2020-11-22 12:00:01","sys":"metric","value":2}
{"ip":"2.2.2.2","host":"b","time":"2020-11-22 12:00:00","sys":"eoi","value":2}
{"host":"c","time":"2020-11-22 12:00:01","value":3}
```
